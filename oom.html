
<html>
<script>
var nodes;
var count;
var current;

function log(message) {
  document.getElementById("log").textContent = message;
}

function generate() {
  const kChunkSize = 1000;
  const kPayloadSize = 100000;
  for (var i = 0; i < kChunkSize && current < count; i++) {
    var node = {};
    node.payload = new Array(kPayloadSize);
    for (var j = 0; j < kPayloadSize; j++) {
      node.payload[j] = i * 1.3;
    }
    nodes.push(node);
    current++;
  }
  if (current < count) {
    setTimeout(generate, 0);
  } else {
    var sum = 0;
    for (var i = 0; i < nodes.length; i++) {
      sum += nodes[i].payload[i % kPayloadSize];
    }
    log("Done (" + sum + ").");
  }
}

function start() {
  nodes = [];
  count = 200000;
  current = 0;
  log("Generating...");
  setTimeout(generate, 0)
}

</script>
<body>
  Open DevTools and generate objects by clicking the button.
  Warning: this might freeze or crash the browser.
  <input type="button" value="Generate" onclick="window.start()">
  <div id="log"></div>
</body>
</html>
