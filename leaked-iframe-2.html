<html>
<script>

class Garbage {
 constructor() {
  this.garbage = [];
 }
}

let garbage = new Garbage();

function generate_garbage() {
  for (let i = 0; i < 20; i++) {
    let a = new Array(50000);
    for (let j = 0; j < a.length; j += 10) {
      a[j] = j + Date.now();
    }
    garbage.garbage.push(a);
  }
  document.getElementById('content').innerHTML = "iframe at " + new Date();

window.addEventListener("ping", function () {
  if (garbage.garbage.length == 20) {
	  window.parent.postMessage("pong", "*");
  }
}, false);
}


</script>
<body onload="generate_garbage()">
	<div id="content">
	</div>
</body>
</html>
