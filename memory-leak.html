<html>
<script>

let leaking_frames = [];

function reload_frame() {
  leaking_frames.push(window.frames[0]);
  document.getElementById('container').innerHTML =
      "<iframe src='leaked-iframe.html' id='myframe' > </iframe>";
  document.getElementById('counter').innerHTML =
      "Leaking " + leaking_frames.length + " iframes";
  if (performance.memory && performance.memory.totalJSHeapSize) {
    document.getElementById('memory').innerHTML = "JavaScript heap " +
        Math.round(performance.memory.totalJSHeapSize / 1024 / 1024) + "MB";
  }
  // Reload the iframe.
  document.getElementById('myframe').src = document.getElementById('myframe').src
  window.setTimeout(reload_frame, 10);
}

</script>
<body onload="reload_frame()" style="font-family: Roboto">
  <div id="container" style="display:none">
    <iframe src="leaked-iframe.html" id="myframe" > </iframe>
  </div>
  <div id="counter"> </div>
  <div id="memory"> </div>
</body>
</html>
